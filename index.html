<!DOCTYPE HTML>
<html lang="zh-cn">

<head>
    <title>Prophet</title>
    <meta name="description" content="Free and easy to use temporary file transfer station">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />
    <meta name="renderer" content="webkit" />

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon-precomposed" href="/plugin/bootstrap-icons-1.8.3/Speedometer.svg" />

    <script type="text/javascript">
        'use strict';

        try {
            var f = new Function("class tmpUITest{a=0}");
        } catch (e) {
            window.location.href = '/version.html';
        }
        
        if (false) {
            //禁用
            if ("serviceWorker" in navigator) {
                navigator.serviceWorker.getRegistrations().then(function (registrations) {
                    for (let registration of registrations) {
                        registration.unregister()
                    }
                })
            }
        } else {
            //启用
            if ("serviceWorker" in navigator) {
                navigator.serviceWorker.register('/pwa_sw.js');
            }
        }
    </script>
    
    <script type="text/javascript" src="./tmpui.js"></script>
    <script type="text/javascript">
        var app = new tmpUI({
            "version": 1,
            "siteroot": "/",
            "loadingIcon": "/img/brand.svg",
            "loadingPage": true,
            "loadingProgress": true,
            "pageNotFound": '/404',

            "languageDefault": "cn",
            "language": {
                "en": "/json/en.json",
                "cn": "/json/cn.json",
            },

            "preload": {
                "init": {
                    "/js/tools/jquery.min.js": { "type": "js", "reload": false },
                    "/js/core/function.js": { "type": "js", "reload": false },

                    "/plugin/iconfont/tabler-icons.min.css": { "type": "css", "reload": false },

                    "/plugin/tabler/js/tabler.min.js": { "type": "js", "reload": false },
                    "/plugin/tabler/css/tabler.min.css": { "type": "css", "reload": false },
                    "/plugin/tabler/css/tabler-flags.min.css": { "type": "css", "reload": false },
                    "/plugin/tabler/css/tabler-payments.min.css": { "type": "css", "reload": false },
                    "/plugin/tabler/css/tabler-vendors.min.css": { "type": "css", "reload": false },

                    "/plugin/tabler/libs/apexcharts/dist/apexcharts.min.js": { "type": "js", "reload": false },
                    "/plugin/tabler/libs/jsvectormap/dist/js/jsvectormap.min.js": { "type": "js", "reload": false },
                    "/plugin/tabler/libs/jsvectormap/dist/maps/world.js": { "type": "js", "reload": false },

                    "/js/core/prophet.js": { "type": "js" , "reload": false},
                    "/js/core/dashboard.js": { "type": "js" , "reload": false},
                    "/js/core/analyzed.js": { "type": "js" , "reload": false},
                    "/js/core/archive.js": { "type": "js" , "reload": false},
                    "/js/core/chart.js": { "type": "js" , "reload": false},
                    "/js/core/realtime.js": { "type": "js" , "reload": false},
                    "/js/core/nav.js": { "type": "js" , "reload": false},
                    "/js/init/init.js": { "type": "js" }
                }
            },
            "append": {
                "dashboard": {
                    "/tpl/include/header.html": { "type": "html", "target": { "type": "id", "val": "tpl_header" } },
                }
            },
            "path": {
                "/": {
                    "title": "Prophet - Prepare",
                    "preload": ["init"],
                    "append": ["dashboard"],
                    "body": {
                        "/tpl/prepare.html": { "type": "html", "target": { "type": "body" } },
                        "/js/init/init_index.js": { "type": "js" }
                    }
                },
                "/panel": {
                    "title": "Prophet",
                    "preload": ["init"],
                    "append": ["dashboard"],
                    "body": {
                        "/tpl/index.html": { "type": "html", "target": { "type": "body" } },
                        "/tpl/dashboard.html": { "type": "file" },
                        "/tpl/home.html": { "type": "file" },
                        "/tpl/global.html": { "type": "file" },
                        "/tpl/network.html": { "type": "file" },
                        "/tpl/analyzed_traffic.html": { "type": "file" },
                        "/tpl/analyzed_usage.html": { "type": "file" },
                        "/js/init/init_dashboard.js": { "type": "js" }
                    }
                },
                "/register": {
                    "title": "Prophet - Register",
                    "preload": ["init"],
                    "append": ["dashboard"],
                    "body": {
                        "/tpl/register.html": { "type": "html", "target": { "type": "body" } },
                        "/js/init/init_register.js": { "type": "js" }
                    }
                },
            }
        });
    </script>

</head>

<body>
    <div id="tmpui"></div>
    <div id="tmpui_body" class="d-flex flex-column"></div>
</body>

</html>